---
no: 4
title: 'React Hooks 最佳实践'
cover: '/images/18.png'
category: ['前端']
subcategory: ['框架']
tag: ['react', 'hooks', '状态管理']
topic: ['前端开发']
collection: ['前端推荐']
author: ['李四']
series: ['React 实战指南']
summary: '深入探讨React Hooks的使用技巧和最佳实践，包括useState、useEffect、自定义Hook等。'
date: '2023-10-04'
updated: '2023-10-04'
---

# React Hooks 最佳实践

React Hooks 彻底改变了我们编写 React 组件的方式，让函数组件拥有了类组件的能力。

## 基础 Hooks

### useState

```jsx
import React, { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  
  return (
    <div>
      <p>当前计数: {count}</p>
      <button onClick={() => setCount(count + 1)}>
        增加
      </button>
    </div>
  )
}
```

### useEffect

```jsx
import React, { useState, useEffect } from 'react'

function UserProfile({ userId }) {
  const [user, setUser] = useState(null)
  
  useEffect(() => {
    fetch(`/api/users/${userId}`)
      .then(response => response.json())
      .then(userData => setUser(userData))
  }, [userId])
  
  if (!user) return <div>加载中...</div>
  
  return <div>用户名: {user.name}</div>
}
```

## 高级 Hooks

### useCallback 和 useMemo

```jsx
import React, { useState, useCallback, useMemo } from 'react'

function ExpensiveComponent({ items, onItemClick }) {
  const [filter, setFilter] = useState('')
  
  const filteredItems = useMemo(() => {
    return items.filter(item => 
      item.name.toLowerCase().includes(filter.toLowerCase())
    )
  }, [items, filter])
  
  const handleItemClick = useCallback((item) => {
    onItemClick(item)
  }, [onItemClick])
  
  return (
    <div>
      <input 
        value={filter}
        onChange={(e) => setFilter(e.target.value)}
        placeholder="搜索..."
      />
      {filteredItems.map(item => (
        <div key={item.id} onClick={() => handleItemClick(item)}>
          {item.name}
        </div>
      ))}
    </div>
  )
}
```

## 自定义 Hook

```jsx
import { useState, useEffect } from 'react'

function useLocalStorage(key, initialValue) {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key)
      return item ? JSON.parse(item) : initialValue
    } catch (error) {
      return initialValue
    }
  })
  
  const setValue = (value) => {
    try {
      setStoredValue(value)
      window.localStorage.setItem(key, JSON.stringify(value))
    } catch (error) {
      console.error(error)
    }
  }
  
  return [storedValue, setValue]
}
```

## 最佳实践

1. **避免在循环、条件或嵌套函数中调用 Hooks**
2. **使用 ESLint 规则检查 Hooks 使用**
3. **合理使用依赖数组**
4. **提取自定义 Hook 复用逻辑**

Hooks 让我们的代码更加简洁和可复用！
